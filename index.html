<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>The Ultimate Journey - Hug Day</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Poppins:wght@300;400;600&family=Great+Vibes&family=Inter:wght@300;400&display=swap" rel="stylesheet">

<style>
/* --- SHARED CSS --- */
*{ margin:0; padding:0; box-sizing:border-box; }
body { background: #000; overflow-x: hidden; font-family: 'Poppins', sans-serif; transition: background 2s ease; width: 100%; }

.scene {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    min-height: 100vh;
    display: none;
    transition: opacity 1.5s ease;
}
.scene.active { display: block; }

/* --- SCENE 1 STYLES --- */
#scene1 {
    background: radial-gradient(circle at center,#1e1e2f,#0f0f18 70%);
    color: white;
}
#scene1.active { display: flex; justify-content: center; align-items: center; }

.glow{
  position:absolute; width:100%; height:100%;
  background:radial-gradient(circle,rgba(255,182,193,0.25),transparent 70%);
  filter:blur(120px); animation:floatAnim 12s ease-in-out infinite alternate;
}
@keyframes floatAnim{ from{transform:translate(-10%,-5%);} to{transform:translate(10%,5%);} }
.container{ text-align:center; z-index:2; width: 90%; max-width:700px; padding:20px; }
.question{ font-family:'Playfair Display',serif; font-size:clamp(28px, 8vw, 42px); line-height:1.4; margin-bottom:40px; opacity:0; animation:fadeIn 2s forwards 1s; }
@keyframes fadeIn{ to{opacity:1;} }
.yes-btn, .next-scene-btn {
  padding:16px 50px; border-radius:50px; border:none; font-size:18px; cursor:pointer;
  background:linear-gradient(120deg,#ff9a9e,#fad0c4); color:#111; font-weight:600;
  box-shadow:0 0 30px rgba(255,182,193,0.6); transition:all .4s ease;
}
.yes-btn { opacity:0; animation:fadeIn 2s forwards 2.5s; }
.yes-btn:hover, .next-scene-btn:hover{ transform:scale(1.1); box-shadow:0 0 50px rgba(255,182,193,0.9); }
.hidden-content{ position:absolute; text-align:center; opacity:0; transition:opacity 2s ease; padding:20px; display: flex; flex-direction: column; align-items: center; width: 100%; }
.main-line{ font-family:'Great Vibes',cursive; font-size:clamp(35px, 10vw, 52px); margin-bottom:20px; }
.sub-line{ font-size:20px; opacity:.85; margin-bottom: 30px; padding: 0 10px; }
.heart-beat{ font-size:100px; margin:30px 0; animation:beat .8s infinite; color: white;}
@keyframes beat{ 0%{transform:scale(1);} 50%{transform:scale(1.2);} 100%{transform:scale(1);} }
.next-scene-btn { opacity: 0; pointer-events: none; transition: opacity 2s ease 1s; }

/* --- SCENE 2 (CONSTELLATION) --- */
#scene2 { background: #000; color: white; }
#canvas1 { position:absolute; top:0; left:0; width: 100%; height: 100%; }
#instructionScreen {
  position:absolute; width:100%; height:100%; background:radial-gradient(circle at center,#0d1b2a,#000814 70%);
  display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; padding:30px; z-index:10; transition:opacity 1s ease;
}
#instructionScreen h1 { font-family:'Playfair Display',serif; font-size:40px; margin-bottom:20px; }
#instructionScreen p { max-width:600px; line-height:1.6; opacity:.85; margin-bottom:30px; }
#startBtn { padding:14px 35px; border:none; border-radius:30px; font-size:16px; background:linear-gradient(45deg,#ffd700,#ff8c00); color:black; cursor:pointer; transition:.3s; box-shadow:0 0 20px rgba(255,215,0,.6); }
#topText{ position:absolute; top:40px; width:100%; text-align:center; font-size:22px; opacity:.9; z-index:5; transition:opacity 1s ease; padding: 0 10px; }
#bottomText{ position:absolute; bottom:110px; width:100%; text-align:center; font-size:20px; opacity:0; transition:opacity 1s ease; z-index:5; padding: 0 20px; }
#goToCode2Btn {
    position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
    z-index: 100; padding: 15px 40px; border-radius: 50px; border: none;
    background: linear-gradient(120deg,#ff9a9e,#fad0c4); font-weight: 600; cursor: pointer;
    opacity: 0; pointer-events: none; transition: 1s ease; font-family: 'Poppins', sans-serif; white-space: nowrap;
}

/* --- SCENE 3 (HUG DELIVERY) --- */
#scene3 { 
    --night-bg: #05060f; --gold: #ffd700; --love-pink: #ff748c; --glass: rgba(255, 255, 255, 0.1);
    background: var(--night-bg); color: white;
}
#scene3.active { display: block; }
#game-wrapper { position: relative; width: 100vw; height: 100vh; background: radial-gradient(circle at center, #1a1b3a 0%, #05060f 100%); }
#canvas2 { display: block; width: 100%; height: 100%; }
.overlay { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; background: rgba(5, 6, 15, 0.85); backdrop-filter: blur(10px); z-index: 100; text-align: center; transition: opacity 0.8s ease; padding: 20px; }
#scene3 h1 { font-size: clamp(2rem, 8vw, 3rem); letter-spacing: 5px; margin-bottom: 0; background: linear-gradient(to right, #ffd700, #ff748c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.3)); }
.btn { background: var(--glass); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 15px 50px; font-size: 1rem; border-radius: 100px; cursor: pointer; backdrop-filter: blur(5px); transition: all 0.3s; margin-top: 30px; letter-spacing: 2px; }
.btn:hover { background: white; color: black; box-shadow: 0 0 30px white; }
#hud { position: absolute; top: 30px; width: 100%; display: flex; flex-direction: column; align-items: center; pointer-events: none; }
#progress-container { width: 70%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; }
#progress-bar { width: 0%; height: 100%; background: linear-gradient(to right, var(--gold), var(--love-pink)); transition: width 0.3s; }

/* --- SCENE 4 (COLD WORLD) --- */
#scene4 {
    height: 100vh; overflow: hidden; color: white;
    display: none; flex-direction: column; justify-content: center; align-items: center;
    background: linear-gradient(#0f2a4d,#08192f);
}
#scene4.active { display: flex; }
#snow { position: absolute; width: 100%; height: 100%; pointer-events: none; overflow: hidden; }
.snowflake { position: absolute; color: white; opacity: .6; animation: fall linear infinite; }
@keyframes fall { from { transform: translateY(-10px); } to { transform: translateY(100vh); } }
#character { font-size: clamp(60px, 15vw, 80px); animation: shake 1s infinite; transition: 1s ease; z-index: 2; }
#message_cold { margin-top: 20px; height: 30px; text-align: center; opacity: .8; padding: 0 20px; }
#hugBtn { margin-top: 20px; padding: 15px 40px; border: none; background: #5bc0ff; color: white; font-size: 18px; cursor: pointer; border-radius: 50px; transition: .2s; z-index: 5; }
#thermoContainer { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); height: 300px; width: 30px; background: rgba(255,255,255,.1); border-radius: 20px; overflow: hidden; }
#thermo { position: absolute; bottom: 0; width: 100%; height: 0%; background: linear-gradient(blue, red); transition: .3s ease; }
#timer { position: absolute; top: 20px; font-size: 18px; opacity: .7; }
#warmOverlay { position: absolute; width: 100%; height: 100%; background: radial-gradient(circle, rgba(255,200,100,.3), transparent); opacity: 0; transition: 2s ease; pointer-events: none; }
#finalTransitionBtn { 
    margin-top: 30px; opacity: 0; pointer-events: none; transition: 1.5s ease;
    padding: 15px 40px; border-radius: 50px; border: none;
    background: white; color: black; font-weight: 600; cursor: pointer;
}

/* --- SCENE 5 (MESSAGES) --- */
#scene5 { background: linear-gradient(135deg,#f5e9e2,#f8f2ed); font-family:'Inter',sans-serif; color:#3d3d3d; display: none; justify-content: center; align-items: center; }
#scene5.active { display: flex; }
.msg-container { text-align: center; width: 95%; max-width: 700px; padding: 20px; }
.photo-wrapper { width: clamp(150px, 40vw, 220px); height: clamp(150px, 40vw, 220px); margin: 0 auto 30px auto; border-radius: 20px; overflow: hidden; box-shadow: 0 15px 40px rgba(0,0,0,0.15); }
.message-box { min-height: 100px; font-size: clamp(1rem, 4vw, 1.2rem); line-height: 1.6; padding: 0 10px; opacity: 0; transition: opacity 0.8s ease; }

/* --- SCENE 6 --- */
.scene6-title{ font-size: clamp(40px, 10vw, 70px); }
.scene6-message{ font-size: clamp(16px, 4vw, 24px); padding: 0 10px; }

.hidden { display: none !important; }
</style>
</head>
<body>

<audio id="bgMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
</audio>

<div id="scene1" class="scene active">
    <div class="glow"></div>
    <div class="container" id="intro">
        <div class="question">Are you ready to make Hug Day special?</div>
        <button class="yes-btn" onclick="startMagic()">Yes üíñ</button>
    </div>
    <div class="hidden-content" id="reveal">
        <div class="heart-beat">‚ù§</div>
        <div class="main-line">Then come closer.</div>
        <div class="sub-line">Because everytime‚Ä¶<br>Your hug means a little more.</div>
        <button class="next-scene-btn" id="moveAheadBtn" onclick="transitionToConstellation()">Let's move ahead</button>
    </div>
</div>

<div id="scene2" class="scene">
    <div id="instructionScreen">
        <h1>Build Our Constellation</h1>
        <p>Click anywhere on the sky to place stars.<br>Watch them connect.<br>Create something beautiful.</p>
        <button id="startBtn">Start</button>
    </div>
    <div id="topText"></div>
    <div id="bottomText"></div>
    <canvas id="canvas1"></canvas>
    <button id="goToCode2Btn" onclick="transitionToCode2()">Proceed to Journey ‚ûî</button>
</div>

<div id="scene3" class="scene">
    <div id="game-wrapper">
        <div id="start-screen" class="overlay">
            <p style="text-transform: uppercase; letter-spacing: 4px; opacity: 0.6; font-size: 12px;">The Journey of Connection</p>
            <h1>HUG DELIVERY</h1>
            <button class="btn" onclick="initGame()">COMMENCE DELIVERY</button>
        </div>
        <div id="hud" class="hud hidden">
            <div id="level-tag" style="margin-bottom: 10px; font-size: 0.7rem; letter-spacing: 3px; color: var(--gold);">BREAKING THE EGO</div>
            <div id="progress-container"><div id="progress-bar"></div></div>
        </div>
        <div id="end-screen" class="overlay hidden">
            <h1 id="end-title">DELIVERED</h1>
            <div style="display: flex; gap: 15px; flex-direction: column;">
                <button class="btn" onclick="resetHugGame()">RETRY</button>
                <button class="btn" onclick="goToColdWorld()" style="background: linear-gradient(45deg, #5bc0ff, #ff748c); border:none;">Lets move to next page ‚ûî</button>
            </div>
        </div>
        <canvas id="canvas2"></canvas>
    </div>
</div>

<div id="scene4" class="scene">
    <div id="snow"></div>
    <div id="warmOverlay"></div>
    <div id="timer">Time Left: 20</div>
    <div id="character">ü•∂</div>
    <div id="status" style="text-align:center; padding: 0 10px;">System Status: Emotional Frost Level ‚Äì CRITICAL</div>
    <button id="hugBtn">HUG</button>
    <div id="message_cold"></div>
    <div id="thermoContainer"><div id="thermo"></div></div>
    <button id="finalTransitionBtn" onclick="transitionToMessages()">Look into my heart ‚ûî</button>
</div>

<div id="scene5" class="scene">
    <div class="msg-container">
        <div class="photo-wrapper">
            <img src="couple.jpg" alt="Us" onerror="this.src='https://via.placeholder.com/220?text=Us'" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <div class="msg-title" style="font-family:'Playfair Display',serif; font-size:1.8rem; color:#3d3d3d; margin-bottom:20px;">Messages I Never Said Out Loud</div>
        <div class="message-box" id="message"></div>
        <button class="reveal-btn" id="revealBtn" style="margin-top: 20px; padding: 12px 30px; border-radius: 40px; border: none; background: white; cursor: pointer;">Read the next one</button>
        <button id="toFinalCodeBtn" onclick="transitionToCode6()" style="display:none; margin-top: 20px; padding: 12px 35px; border-radius: 40px; border: 2px solid #ff9a9e; background: transparent; color: #ff9a9e; font-weight:600; cursor:pointer;">The Final Step ‚ûî</button>
    </div>
</div>

<div id="scene6" class="scene" style="background: linear-gradient(135deg,#ff9a9e,#fad0c4); text-align:center; padding:20px; display:none; flex-direction:column; justify-content:center; align-items:center;">
    <div class="scene6-title" style="font-family:'Great Vibes',cursive; color:#c1121f;">Happy Hug Day My Loveü´Çüíû</div>
    <div class="scene6-message" style="margin-top:30px; font-family:'Playfair Display',serif; color:#4a2c2a; line-height:1.7;">
        Some hugs don‚Äôt just wrap around your body‚Ä¶<br>they wrap around your fears.<br><br>
        Some hugs don‚Äôt just feel warm‚Ä¶<br>they feel like home and for me that hug is only your hug.ü´Ç‚ú®
    </div>
    <div style="font-size:50px; margin-top:30px;">ü´Ç</div>
</div>

<script>
/* --- AUDIO LOGIC --- */
const bgMusic = document.getElementById("bgMusic");

/* --- TRANSITIONS --- */
function startMagic(){
    // Start music on first interaction
    bgMusic.play().catch(e => console.log("Audio waiting for interaction"));
    
    document.getElementById("intro").style.opacity="0";
    document.getElementById("scene1").style.background="radial-gradient(circle at center,#ff9bd8,#ff6ec7,#1e1e2f)";
    setTimeout(()=>{
        document.getElementById("intro").style.display="none";
        document.getElementById("reveal").style.opacity="1";
        document.getElementById("moveAheadBtn").style.opacity = "1";
        document.getElementById("moveAheadBtn").style.pointerEvents = "auto";
    }, 1500);
}

function transitionToConstellation() {
    document.getElementById("scene1").classList.remove("active");
    document.getElementById("scene2").classList.add("active");
    initConstellation();
}

function transitionToCode2() {
    document.getElementById("scene2").classList.remove("active");
    document.getElementById("scene3").classList.add("active");
    resizeCode2();
}

function goToColdWorld() {
    document.getElementById("scene3").classList.remove("active");
    document.getElementById("scene4").classList.add("active");
    initColdWorld();
}

function transitionToMessages() {
    document.getElementById("scene4").classList.remove("active");
    document.getElementById("scene5").classList.add("active");
    initMessages();
}

function transitionToCode6() {
    document.getElementById("scene5").classList.remove("active");
    document.getElementById("scene6").style.display = "flex";
}

/* --- SCENE 2 LOGIC --- */
let stars=[], starsStarted=false, canvas1, ctx1;
function initConstellation() {
    canvas1 = document.getElementById("canvas1");
    ctx1 = canvas1.getContext("2d");
    canvas1.width = window.innerWidth;
    canvas1.height = window.innerHeight;
    
    document.getElementById("startBtn").onclick=()=>{
        document.getElementById("instructionScreen").style.opacity=0;
        setTimeout(()=>document.getElementById("instructionScreen").style.display="none", 1000);
        starsStarted=true;
        document.getElementById("topText").innerText="Not everything beautiful exists already.";
    };

    const handleStar = (x, y) => {
        if(!starsStarted) return;
        stars.push({x, y});
        const bt = document.getElementById("bottomText");
        const nextBtn = document.getElementById("goToCode2Btn");
        if(stars.length === 5) bt.style.opacity = 1, bt.innerText = "Effort creates patterns.";
        if(stars.length === 10){
            bt.innerHTML = "<strong>We built this.</strong><br>And that‚Äôs why it shines.";
            nextBtn.style.opacity = 1; nextBtn.style.pointerEvents = "auto";
        }
    };

    canvas1.onclick = (e) => handleStar(e.clientX, e.clientY);
    canvas1.ontouchstart = (e) => handleStar(e.touches[0].clientX, e.touches[0].clientY);
    animateConstellation();
}
function animateConstellation(){
    ctx1.fillStyle="#000814"; ctx1.fillRect(0,0,canvas1.width,canvas1.height);
    stars.forEach(s=>{
        ctx1.beginPath(); ctx1.arc(s.x,s.y,4,0,Math.PI*2); ctx1.fillStyle="white"; ctx1.fill();
    });
    if(stars.length >= 2){
        ctx1.beginPath(); ctx1.moveTo(stars[0].x, stars[0].y);
        for(let i=1; i<stars.length; i++) ctx1.lineTo(stars[i].x, stars[i].y);
        ctx1.strokeStyle = (stars.length >= 10) ? "gold" : "rgba(255,255,255,0.5)";
        ctx1.lineWidth = (stars.length >= 10) ? 3 : 1;
        ctx1.stroke();
    }
    requestAnimationFrame(animateConstellation);
}

/* --- SCENE 3 HUG DELIVERY LOGIC --- */
const canvas2 = document.getElementById('canvas2');
const ctx2 = canvas2.getContext('2d');
let gameRunning = false, dist = 0, energy = 100, obstacles = [], orb = { x: 80, y: 300, r: 18, ty: 300 };
const keys = {};

window.addEventListener('keydown', e => keys[e.code] = true);
window.addEventListener('keyup', e => keys[e.code] = false);
window.addEventListener('touchstart', e => { orb.ty = e.touches[0].clientY; });
window.addEventListener('touchmove', e => { orb.ty = e.touches[0].clientY; e.preventDefault(); }, {passive: false});

function resizeCode2() { canvas2.width = window.innerWidth; canvas2.height = window.innerHeight; orb.y = canvas2.height/2; orb.ty = orb.y; }

function initGame() {
    document.getElementById('start-screen').classList.add('hidden');
    document.getElementById('hud').classList.remove('hidden');
    gameRunning = true; energy = 100; dist = 0; obstacles = [];
    loopHugGame();
}

function resetHugGame() {
    document.getElementById('end-screen').classList.add('hidden');
    initGame();
}

function loopHugGame() {
    if(!gameRunning) return;
    ctx2.clearRect(0,0,canvas2.width, canvas2.height);

    if(keys['ArrowUp'] || keys['KeyW']) orb.ty -= 7;
    if(keys['ArrowDown'] || keys['KeyS']) orb.ty += 7;
    orb.y += (orb.ty - orb.y) * 0.1;
    
    dist += 5;
    document.getElementById('progress-bar').style.width = (dist/5000*100) + '%';

    if(Math.random() < 0.04) obstacles.push({x: canvas2.width, y: Math.random()*canvas2.height});
    obstacles.forEach((o, i) => {
        o.x -= 8;
        ctx2.fillStyle = "white";
        ctx2.fillRect(o.x, o.y, 20, 60);
        if(Math.abs(o.x - orb.x) < 25 && orb.y > o.y && orb.y < o.y + 60) {
            energy -= 20;
            obstacles.splice(i, 1);
        }
    });

    ctx2.beginPath(); ctx2.arc(orb.x, orb.y, orb.r, 0, Math.PI*2);
    ctx2.fillStyle = energy > 30 ? "#ffd700" : "#ff4444"; ctx2.fill();

    if(energy <= 0) { gameRunning = false; resetHugGame(); }
    if(dist >= 5000) { gameRunning = false; document.getElementById('end-screen').classList.remove('hidden'); }
    
    requestAnimationFrame(loopHugGame);
}

/* --- SCENE 4 COLD WORLD LOGIC --- */
let warmth = 0, timeLeft = 20, coldOver = false, timerInt;
function initColdWorld() {
    warmth = 0; timeLeft = 20; coldOver = false;
    document.getElementById("thermo").style.height = "0%";
    document.getElementById("snow").innerHTML = "";
    for(let i=0; i<40; i++) {
        let s = document.createElement("div"); s.className="snowflake"; s.innerText="‚ùÑÔ∏è";
        s.style.left = Math.random()*100+"vw"; s.style.animationDuration = (3+Math.random()*3)+"s";
        document.getElementById("snow").appendChild(s);
    }
    clearInterval(timerInt);
    timerInt = setInterval(() => {
        if(coldOver) return;
        timeLeft--;
        document.getElementById("timer").innerText = "Time Left: " + timeLeft;
        if(timeLeft <= 0) { clearInterval(timerInt); initColdWorld(); }
    }, 1000);

    document.getElementById("hugBtn").onclick = () => {
        if(coldOver) return;
        warmth += 5;
        document.getElementById("thermo").style.height = warmth + "%";
        if(warmth >= 100) {
            coldOver = true; clearInterval(timerInt);
            document.getElementById("character").innerText = "ü§ó‚ù§Ô∏è";
            document.getElementById("warmOverlay").style.opacity = "1";
            document.getElementById("finalTransitionBtn").style.opacity = "1";
            document.getElementById("finalTransitionBtn").style.pointerEvents = "auto";
        }
    };
}

/* --- SCENE 5 MESSAGES LOGIC --- */
function initMessages() {
    const msgs = [
        "I act strong in front of everyone‚Ä¶ but you are the only one in front of whom I can be real me.",
        "I don‚Äôt say it, but I look for you in crowded rooms.",
        "You feel like home in human form.",
        "When I‚Äôm quiet, it‚Äôs not distance. It‚Äôs me wanting you closer.",
        "I replay the way you hold me more than I‚Äôll admit.",
        "The only place I actually feel okay is in your arms.",
        "I never want a world where your hug isn‚Äôt mine."
    ];
    let idx = 0;
    const box = document.getElementById("message");
    const btn = document.getElementById("revealBtn");
    const finalBtn = document.getElementById("toFinalCodeBtn");

    btn.onclick = () => {
        if(idx < msgs.length) {
            box.style.opacity = 0;
            setTimeout(() => {
                box.innerText = msgs[idx++];
                box.style.opacity = 1;
                if(idx === msgs.length) {
                    btn.style.display = "none";
                    finalBtn.style.display = "inline-block";
                }
            }, 400);
        }
    };
}
</script>
</body>
</html>